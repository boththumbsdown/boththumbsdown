<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WORLD CLOCK</title>

<link href="https://unpkg.com/cesium/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />
<script src="https://unpkg.com/cesium/Build/Cesium/Cesium.js"></script>

<style>

  @font-face{
    font-family: "FranklinGothicPencildrawn";
    src: url("FranklinGothicPencildrawn-ExtraCond.woff2") format("woff2");
    font-weight: 800;
    font-style: normal;
    font-display: swap;
  }


:root{
  --bg:#000;
  --white:#fff;
  --red:#ff0000;
  --blue:rgb(0,0,255);
  --green:rgb(0,255,0);
  --yellow:rgb(255,255,0);

  --big: min(10vh, 120px);
  --infoScale: 0.5;

  --sideSafe: 2.5vw;
  --topPad: 3vh;
}

html,body{
  margin:0;
  height:100%;
  background:var(--bg);
  overflow:hidden;
  font-family: "FranklinGothicPencildrawn", sans-serif;
}

#cesiumContainer{
  position:fixed;
  inset:0;
}

/* ================= CENTER LINE ================= */
.center-line{
  position:fixed;
  left:50%;
  top:0;
  width:2px;
  height:100vh;
  background:rgba(255,255,255,0.85);
  transform:translateX(-50%);
  pointer-events:none;
  z-index:30;
}

/* ================= HEADLINE ================= */
.headline-wrap{
  position:fixed;
  left:50%;
  top:var(--topPad);
  transform:translateX(-50%) scale(1.30);
  transform-origin: top center;

  width:max-content;
  max-width:none;
  text-align:center;
  pointer-events:none;
  z-index:80;
}

.headline{
  font-weight:800;
  font-size:var(--big);
  line-height: 0.8;
  letter-spacing:0.02em;
  color:var(--white);

  text-rendering:geometricPrecision;
  -webkit-font-smoothing:antialiased;

  display:inline-block;
  text-align:center;

  white-space:nowrap;
  word-break:keep-all;
}

.headline.is-wrapped br{
  display:block;
}

.headline br{
  display:block;
}

/* ================= CLOCK ================= */
.center-clock{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(46vh,520px);
  aspect-ratio:1/1;
  pointer-events:none;
  z-index:60;
}

/* ================= BOTTOM INFO ================= */
.bottom-ui{
  position:fixed;
  left:50%;
  bottom:4vh;
  transform:translateX(-50%) scale(var(--infoScale));
  transform-origin:bottom center;

  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0em;

  pointer-events:none;
  z-index:90;
  max-width:calc(100vw - (var(--sideSafe) * 2));
}

.info-line{
  font-weight:800;
  font-size:var(--big);
  line-height:1;
  letter-spacing:0.02em;
  white-space:nowrap;
  text-align:center;
  text-rendering:geometricPrecision;
  -webkit-font-smoothing:antialiased;
}

.info-line.datetime{ color:var(--red); }
.info-line.lon{ color:var(--green); }
.info-line.place{ color:var(--blue); }

/* ================= RESPONSIVE ================= */
@media (max-aspect-ratio:3/4){
  :root{ --big: min(8vh, 92px); }
  .center-clock{ width:min(38vh,440px); }
}
</style>
</head>

<body>
<div id="cesiumContainer"></div>
<div class="center-line"></div>

<!-- HEADLINE -->
<div class="headline-wrap">
  <div class="headline is-wrapped" id="headlineLine">
    EVERY DAY<br>IS A NEW DAY
  </div>
</div>

<!-- CLOCK -->
<svg class="center-clock" viewBox="0 0 100 100" aria-hidden="true">
  <g id="minuteTicks"></g>

  <circle cx="50" cy="50" r="40" fill="none"
    stroke="var(--red)" stroke-width="1.2"></circle>

  <line x1="50" y1="10" x2="50" y2="18"
    stroke="var(--red)" stroke-width="1.6" stroke-linecap="round"></line>

  <!-- hands (00:00 fixed) -->
  <line x1="50" y1="50" x2="50" y2="28"
    stroke="var(--red)" stroke-width="3.2" stroke-linecap="round"></line>
  <line x1="50" y1="50" x2="50" y2="20"
    stroke="var(--red)" stroke-width="2.2" stroke-linecap="round"></line>

  <circle cx="50" cy="50" r="2.2" fill="var(--red)"></circle>
</svg>

<!-- BOTTOM INFO -->
<div class="bottom-ui">
  <div class="info-line datetime" id="dateTimeLine">LOADING…</div>
  <div class="info-line lon" id="lonLine">LOADING…</div>
  <div class="info-line place" id="placeLine"></div>
</div>

<script>
(async () => {
  Cesium.Ion.defaultAccessToken =
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkNWNmOTE0Yi0wMDAzLTQzNDAtYTg4NC02YjdmYTVkZjBlNDgiLCJpZCI6Mzg1ODc3LCJpYXQiOjE3Njk5Nzg5Njl9.tCSau-yKKszfHUbw8Ip_t2uRNyduPYBTDSpgeD2hxC4";

  const viewer = new Cesium.Viewer("cesiumContainer", {
    animation:false, timeline:false, baseLayerPicker:false, geocoder:false,
    homeButton:false, navigationHelpButton:false, sceneModePicker:false,
    fullscreenButton:false, selectionIndicator:false, infoBox:false,
    shouldAnimate:true
  });

  viewer.scene.skyAtmosphere.show = false;
  viewer.scene.skyBox.show = false;
  viewer.scene.sun.show = false;
  viewer.scene.moon.show = false;
  viewer.scene.fog.enabled = false;
  viewer.scene.backgroundColor = Cesium.Color.BLACK;

  viewer.imageryLayers.removeAll();
  const provider = await Cesium.createWorldImageryAsync({
    style: Cesium.IonWorldImageryStyle.AERIAL
  });
  viewer.imageryLayers.addImageryProvider(provider);

  /* ===== minute ticks ===== */
  const tickGroup = document.getElementById("minuteTicks");
  for(let i=0;i<60;i++){
    const major = i % 5 === 0;
    const a = i * 6 * Math.PI / 180;
    const sin = Math.sin(a), cos = Math.cos(a);

    const rOuter = 40;
    const rInner = major ? 34.2 : 36.2;

    const line = document.createElementNS("http://www.w3.org/2000/svg","line");
    line.setAttribute("x1", 50 + sin * rInner);
    line.setAttribute("y1", 50 - cos * rInner);
    line.setAttribute("x2", 50 + sin * rOuter);
    line.setAttribute("y2", 50 - cos * rOuter);
    line.setAttribute("stroke", "var(--red)");
    line.setAttribute("stroke-width", major ? "1.6" : "1.0");
    line.setAttribute("stroke-linecap","round");
    line.setAttribute("opacity", major ? "0.95" : "0.85");
    tickGroup.appendChild(line);
  }

  /* ===== UI refs ===== */
  const dateTimeEl = document.getElementById("dateTimeLine");
  const lonEl = document.getElementById("lonLine");
  const placeEl = document.getElementById("placeLine");

  /* ===== helpers ===== */
  function getMidnightOffsetHours(now){
    const utc =
      now.getUTCHours() +
      now.getUTCMinutes()/60 +
      (now.getUTCSeconds()+now.getUTCMilliseconds()/1000)/3600;

    let offset = -utc;
    offset = ((offset % 24) + 24) % 24;
    if(offset > 12) offset -= 24;
    return offset;
  }
  function offsetToLongitude(h){ return h * 15; }
  function normLon180(lon){
    return ((lon + 180) % 360 + 360) % 360 - 180;
  }

  function formatMidnightDateTime(now){
    const offsetH = getMidnightOffsetHours(now);
    const shifted = new Date(now.getTime() + offsetH * 3600 * 1000);
    const Y = shifted.getUTCFullYear();
    const M = shifted.getUTCMonth();
    const D = shifted.getUTCDate();
    const MONTHS = ["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];
    return `${Y} ${MONTHS[M]} ${String(D).padStart(2,"0")}. 00:00:00`;
  }

  function formatLongitudeDecimal4(lon180){
    const dir = lon180 >= 0 ? "E" : "W";
    const abs = Math.abs(lon180);
    const num = abs.toFixed(4).padStart(8,"0");
    return `LONGITUDE ${num}°${dir}`;
  }

const CITIES = [
  { country:"SENEGAL", city:"DAKAR", lon:-17.4677 },
  { country:"MOROCCO", city:"CASABLANCA", lon:-7.5898 },
  { country:"GHANA", city:"ACCRA", lon:-0.1870 },
  { country:"NIGERIA", city:"LAGOS", lon:3.3792 },
  { country:"TUNISIA", city:"TUNIS", lon:10.1815 },
  { country:"EGYPT", city:"ALEXANDRIA", lon:29.9187 },
  { country:"EGYPT", city:"CAIRO", lon:31.2357 },
  { country:"ETHIOPIA", city:"ADDIS ABABA", lon:38.7578 },
  { country:"KENYA", city:"NAIROBI", lon:36.8219 },
  { country:"TANZANIA", city:"DAR ES SALAAM", lon:39.2083 },
  { country:"SOUTH AFRICA", city:"CAPE TOWN", lon:18.4241 },
  { country:"SOUTH AFRICA", city:"JOHANNESBURG", lon:28.0473 },

  { country:"ICELAND", city:"REYKJAVÍK", lon:-21.8277 },
  { country:"IRELAND", city:"DUBLIN", lon:-6.2603 },
  { country:"UNITED KINGDOM", city:"LONDON", lon:-0.1278 },
  { country:"UNITED KINGDOM", city:"MANCHESTER", lon:-2.2426 },
  { country:"PORTUGAL", city:"LISBON", lon:-9.1393 },
  { country:"SPAIN", city:"MADRID", lon:-3.7038 },
  { country:"SPAIN", city:"BARCELONA", lon:2.1734 },
  { country:"FRANCE", city:"PARIS", lon:2.3522 },
  { country:"FRANCE", city:"MARSEILLE", lon:5.3698 },
  { country:"BELGIUM", city:"BRUSSELS", lon:4.3517 },
  { country:"NETHERLANDS", city:"AMSTERDAM", lon:4.9041 },
  { country:"NETHERLANDS", city:"ROTTERDAM", lon:4.4792 },
  { country:"GERMANY", city:"HAMBURG", lon:9.9937 },
  { country:"GERMANY", city:"BERLIN", lon:13.4050 },
  { country:"GERMANY", city:"MUNICH", lon:11.5820 },
  { country:"SWITZERLAND", city:"ZÜRICH", lon:8.5417 },
  { country:"ITALY", city:"MILAN", lon:9.1900 },
  { country:"ITALY", city:"ROME", lon:12.4964 },
  { country:"ITALY", city:"NAPLES", lon:14.2681 },
  { country:"AUSTRIA", city:"VIENNA", lon:16.3738 },
  { country:"CZECH REPUBLIC", city:"PRAGUE", lon:14.4378 },
  { country:"HUNGARY", city:"BUDAPEST", lon:19.0402 },
  { country:"POLAND", city:"WARSAW", lon:21.0122 },
  { country:"DENMARK", city:"COPENHAGEN", lon:12.5683 },
  { country:"SWEDEN", city:"STOCKHOLM", lon:18.0686 },
  { country:"NORWAY", city:"OSLO", lon:10.7522 },
  { country:"FINLAND", city:"HELSINKI", lon:24.9384 },
  { country:"GREECE", city:"ATHENS", lon:23.7275 },
  { country:"ROMANIA", city:"BUCHAREST", lon:26.1025 },
  { country:"UKRAINE", city:"KYIV", lon:30.5234 },
  { country:"RUSSIA", city:"SAINT PETERSBURG", lon:30.3351 },
  { country:"RUSSIA", city:"MOSCOW", lon:37.6173 },

  { country:"ISRAEL", city:"TEL AVIV", lon:34.7818 },
  { country:"LEBANON", city:"BEIRUT", lon:35.5018 },
  { country:"SAUDI ARABIA", city:"RIYADH", lon:46.6753 },
  { country:"UNITED ARAB EMIRATES", city:"ABU DHABI", lon:54.3773 },
  { country:"UNITED ARAB EMIRATES", city:"DUBAI", lon:55.2708 },
  { country:"QATAR", city:"DOHA", lon:51.5310 },
  { country:"TURKEY", city:"ISTANBUL", lon:28.9784 },
  { country:"GEORGIA", city:"TBILISI", lon:44.8271 },
  { country:"AZERBAIJAN", city:"BAKU", lon:49.8671 },
  { country:"IRAN", city:"TEHRAN", lon:51.3890 },
  { country:"UZBEKISTAN", city:"TASHKENT", lon:69.2401 },
  { country:"KAZAKHSTAN", city:"ALMATY", lon:76.9450 },

  { country:"PAKISTAN", city:"KARACHI", lon:67.0099 },
  { country:"INDIA", city:"MUMBAI", lon:72.8777 },
  { country:"INDIA", city:"NEW DELHI", lon:77.2090 },
  { country:"INDIA", city:"CHENNAI", lon:80.2707 },
  { country:"SRI LANKA", city:"COLOMBO", lon:79.8612 },
  { country:"BANGLADESH", city:"DHAKA", lon:90.4125 },
  { country:"NEPAL", city:"KATHMANDU", lon:85.3240 },

  { country:"MYANMAR", city:"YANGON", lon:96.1951 },
  { country:"THAILAND", city:"BANGKOK", lon:100.5018 },
  { country:"CAMBODIA", city:"PHNOM PENH", lon:104.9282 },
  { country:"VIETNAM", city:"HO CHI MINH CITY", lon:106.6297 },
  { country:"VIETNAM", city:"HANOI", lon:105.8342 },
  { country:"MALAYSIA", city:"KUALA LUMPUR", lon:101.6869 },
  { country:"SINGAPORE", city:"SINGAPORE", lon:103.8198 },
  { country:"INDONESIA", city:"JAKARTA", lon:106.8456 },
  { country:"PHILIPPINES", city:"MANILA", lon:120.9842 },

  { country:"CHINA", city:"BEIJING", lon:116.4074 },
  { country:"CHINA", city:"SHANGHAI", lon:121.4737 },
  { country:"CHINA", city:"HONG KONG", lon:114.1694 },
  { country:"TAIWAN", city:"TAIPEI", lon:121.5654 },
  { country:"SOUTH KOREA", city:"SEOUL", lon:126.9780 },
  { country:"SOUTH KOREA", city:"BUSAN", lon:129.0756 },
  { country:"JAPAN", city:"OSAKA", lon:135.5023 },
  { country:"JAPAN", city:"TOKYO", lon:139.6503 },
  { country:"JAPAN", city:"SAPPORO", lon:141.3545 },

  { country:"AUSTRALIA", city:"PERTH", lon:115.8605 },
  { country:"AUSTRALIA", city:"ADELAIDE", lon:138.6007 },
  { country:"AUSTRALIA", city:"MELBOURNE", lon:144.9631 },
  { country:"AUSTRALIA", city:"SYDNEY", lon:151.2093 },
  { country:"NEW ZEALAND", city:"AUCKLAND", lon:174.7633 },
  { country:"NEW ZEALAND", city:"WELLINGTON", lon:174.7772 },

  { country:"CANADA", city:"VANCOUVER", lon:-123.1207 },
  { country:"CANADA", city:"CALGARY", lon:-114.0719 },
  { country:"CANADA", city:"TORONTO", lon:-79.3832 },
  { country:"UNITED STATES", city:"SEATTLE", lon:-122.3321 },
  { country:"UNITED STATES", city:"SAN FRANCISCO", lon:-122.4194 },
  { country:"UNITED STATES", city:"LOS ANGELES", lon:-118.2437 },
  { country:"UNITED STATES", city:"DENVER", lon:-104.9903 },
  { country:"UNITED STATES", city:"CHICAGO", lon:-87.6298 },
  { country:"UNITED STATES", city:"HOUSTON", lon:-95.3698 },
  { country:"UNITED STATES", city:"WASHINGTON, D.C.", lon:-77.0369 },
  { country:"UNITED STATES", city:"NEW YORK", lon:-74.0060 },
  { country:"MEXICO", city:"MEXICO CITY", lon:-99.1332 },
  { country:"CUBA", city:"HAVANA", lon:-82.3666 },
  { country:"COLOMBIA", city:"BOGOTÁ", lon:-74.0721 },
  { country:"PERU", city:"LIMA", lon:-77.0428 },
  { country:"CHILE", city:"SANTIAGO", lon:-70.6693 },
  { country:"ARGENTINA", city:"BUENOS AIRES", lon:-58.3816 },
  { country:"BRAZIL", city:"RIO DE JANEIRO", lon:-43.1729 },
  { country:"BRAZIL", city:"SÃO PAULO", lon:-46.6333 }
];


  function nearestCity(lon){
    let best=null, d=999;
    for(const c of CITIES){
      let diff=Math.abs(lon-c.lon);
      if(diff>180) diff=360-diff;
      if(diff<d){ d=diff; best=c; }
    }
    return best;
  }

  const CAM_LAT=0;
  const CAM_RANGE=15_000_000;
  const CAM_PITCH=Cesium.Math.toRadians(-90);

  function animate(){
    const now=new Date();
    const offset=getMidnightOffsetHours(now);
    const lon=normLon180(offsetToLongitude(offset));

    viewer.camera.lookAt(
      Cesium.Cartesian3.fromDegrees(lon,CAM_LAT),
      new Cesium.HeadingPitchRange(0,CAM_PITCH,CAM_RANGE)
    );

    dateTimeEl.textContent = formatMidnightDateTime(now);
    lonEl.textContent = formatLongitudeDecimal4(lon);

    const city = nearestCity(lon);
    placeEl.textContent = city ? `${city.country} · ${city.city}` : "";

    requestAnimationFrame(animate);
  }

  animate();
})();
</script>
</body>
</html>
